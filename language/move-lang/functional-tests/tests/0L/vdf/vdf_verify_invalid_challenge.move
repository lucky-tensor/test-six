// NOTE: TEST SETUP: If you add a "validator", functional tests will add only that validator to genesis.
// By default 0L tests load 3 random validators on genesis. This is slow. So adding a dummy validator will only run the initialize_miners once instead of three times, and speeds up testing.

//! new-transaction
script{
use 0x1::VDF;
// use 0x1::Debug;
fun main() {

  // This checks that the VDF verifier catches an invalide "challenge" parameter, and fails gracefully with error.

  let challenge: vector<u8>;
  let difficulty: u64;
  let solution: vector<u8>;
  let re: bool;

  difficulty = 100;

  // incorrect challenge.
  challenge = x"bb";
  solution = x"005271e8f9ab2eb8a2906e851dfcb5542e4173f016b85e29d481a108dc82ed3b3f97937b7aa824801138d1771dea8dae2f6397e76a80613afda30f2c30a34b040baaafe76d5707d68689193e5d211833b372a6a4591abb88e2e7f2f5a5ec818b5707b86b8b2c495ca1581c179168509e3593f9a16879620a4dc4e907df452e8dd0ffc4f199825f54ec70472cc061f22eb54c48d6aa5af3ea375a392ac77294e2d955dde1d102ae2ace494293492d31cff21944a8bcb4608993065c9a00292e8d3f4604e7465b4eeefb494f5bea102db343bb61c5a15c7bdf288206885c130fa1f2d86bf5e4634fdc4216bc16ef7dac970b0ee46d69416f9a9acee651d158ac64915b000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001";

  re = VDF::verify(&challenge, &difficulty, &solution);
  // Debug::print<bool>(&re);
  assert(move re ==false, 1);
}
}
